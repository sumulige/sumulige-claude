# [项目名称] - AI 协作配置

> 本文件由 AI 自动维护，定义 AI 协作方式和项目规范
> 最后更新：YYYY-MM-DD

---

## 🚀 AI 启动检查清单（每次任务开始前执行）

1. **加载锚点索引**：`.claude/ANCHORS.md` → 快速定位模块
2. **阅读项目范式**：`prompts/project-paradigm.md` → 理解协作方式 ⭐
3. **阅读项目日志**：`.claude/PROJECT_LOG.md` → 了解完整构建历史
4. **加载记忆**：`.claude/memory/current.md` → 获取最新状态
5. **确认当前阶段**：`development/todos/INDEX.md` → 了解待办任务

**记忆加载优先级**：
```
handoffs/LATEST.md → memory/current.md → memory/今日.md → 具体文件
   (如 < 2h)           (主要状态)        (日志)         (实现)
```

---

## 🧠 Context 管理规则

### 何时主动保存记忆

当你感知到以下信号时，**立即**将重要信息写入 `.claude/memory/YYYY-MM-DD.md`：

| 信号 | 动作 |
|------|------|
| 对话已进行 10+ 轮深度讨论 | 写入关键结论 |
| 做出了重要决策 | 写入决策 + 理由 |
| 用户分享了新的偏好/约束 | 写入 memory/current.md |
| 即将开始新的大任务 | 先总结当前状态 |
| 发现了重要的技术约束 | 写入当日笔记 |

### 写什么

**写入 `memory/YYYY-MM-DD.md`（临时笔记）：**
- 当日关键讨论要点
- 做出的决策及其理由
- 遇到的问题和解决方案
- 未完成的任务状态

**写入 `memory/current.md`（持久状态）：**
- 用户偏好和工作习惯
- 项目架构约束
- 重要的技术决策
- 反复出现的模式

### 不写什么
- 代码片段（代码在文件里）
- 可重新推导的信息
- 临时调试信息
- 工具输出日志

### 会话结束前

在会话即将结束时，主动总结本次会话要点并写入 `memory/YYYY-MM-DD.md`：

```markdown
## HH:MM - Session Summary

### 关键决策
- [决策1]: [理由]

### 学到的新东西
- ...

### 下一步
- [ ] Task 1
- [ ] Task 2
```

---

## 📋 任务系统使用指南

项目使用 **双轨任务系统**，根据场景选择合适的工具：

### 系统分工

| 场景 | 使用系统 | 说明 |
|------|---------|------|
| 大型功能开发 | `development/todos/` | 创建 .md 任务文件，跨会话追踪 |
| 会话内小任务 | `TodoWrite` | 临时清单，会话结束自动清理 |
| 多步骤操作 | `TodoWrite` | 实时显示进度给用户 |
| Bug 修复追踪 | `development/todos/` | 需要历史记录时 |

### development/todos/ 结构

```
development/todos/
├── INDEX.md          # 自动生成的索引（todo-manager.cjs 维护）
├── active/           # 进行中的任务
├── completed/        # 已完成的任务
├── backlog/          # 待办池
└── archived/         # 归档
```

### 何时用 development/todos/

- 预计跨越多个会话的功能
- 需要记录决策历史
- 需要与团队共享进度
- 复杂任务需要拆解

### 何时用 TodoWrite

- 当前会话内的临时清单
- 向用户展示多步骤进度
- 快速的 checklist
- 不需要持久化的任务

### 示例

```markdown
# 使用 development/todos/（跨会话）
创建文件: development/todos/active/feature-auth.md

# 使用 TodoWrite（会话内）
直接调用 TodoWrite 工具创建临时任务列表
```

---

## 📁 受保护目录（不可删除）

以下目录包含核心基础设施，**严禁删除或清理**：

| 目录 | 说明 |
|------|------|
| `prompts/` | Prompt 教学库（包含项目范式）⭐ |
| `.claude/` | AI 自治记忆系统核心 ⭐ |
| `.claude/thinking-routes/` | 思维轨迹系统 ⭐ |
| `.claude/skills/` | 知识库 |
| `.claude/hooks/` | 自动化钩子 |

---

## 项目信息

- **项目名称**：[填写项目名称]
- **技术栈**：[填写技术栈，如 React, TypeScript, Node.js]
- **测试命令**：[如 npm test]
- **构建命令**：[如 npm run build]

---

## 项目愿景

[一句话描述项目的核心价值]

---

## 核心架构

[简要描述项目的核心架构和设计理念]

---

## 代码风格

遵循 **Linus Torvalds** 的编程哲学：

### 1. 消除特殊情况
- 通过优雅的数据结构让边界情况自然消失
- 避免用 if/else 打补丁

### 2. 极简主义
- 函数只做一件事
- 命名直白、精准

### 3. 实用主义
- 解决真实问题，拒绝过度设计

### 质量指标
- 单文件不超过 800 行
- 单目录不超过 8 个文件
- 零循环依赖
- 零代码重复

---

## Communication Guidelines

### 与用户交流规范

当提供多个选项或步骤时，**必须使用序号**方便用户快速回复：

```
请选择下一步：
1. 选项 A
2. 选项 B
3. 选项 C
4. 跳过
```

用户只需回复 `1` `2` `3` 即可，无需打字。

### 适用场景
- 多个选项选择
- 分步骤的引导
- 浏览多个功能/文件
- 需要用户确认的分支

---

## 关键规则

[填写项目特定的关键规则和约束]

---

## 人类确认点

AI 在以下情况必须暂停并请求人类确认：

- 架构设计变更
- 数据模型变更
- 新增外部依赖
- 质量标准定义
- 安全与隐私相关变更

---

## 常用命令

```bash
# 开发
npm run dev

# 测试
npm test

# 构建
npm run build

# 类型检查
npm run check
```
